{% extends 'base.html' %}

{% block content %}
    <h2>Detaylı Arama</h2>
    <hr>

    <div style="background-color: #f9f9f9; padding: 20px; border-radius: 5px; margin-bottom: 20px;">
        <form method="get">
            <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                
                <div>
                    <label>Tür (Örn: setosa):</label><br>
                    <input type="text" name="species" class="form-control">
                </div>

                <div>
                    <label>Min. Sepal Length:</label><br>
                    <input type="number" step="0.1" name="min_sepal" class="form-control">
                </div>

                <div>
                    <label>Şehir:</label><br>
                    <input type="text" name="city" class="form-control">
                </div>

                <div style="align-self: flex-end;">
                    <button type="submit" style="background: #333; color: white; padding: 8px 15px; border: none; cursor: pointer;">
                        Ara
                    </button>
                    <a href="{% url 'plant_search' %}" style="margin-left: 10px; color: red; text-decoration: none;">Temizle</a>
                </div>
            </div>
        </form>
    </div>

    <h3>Sonuçlar ({{ plants.count }})</h3>
    {% if plants %}
        <table>
            <thead>
                <tr>
                    <th>Tür</th>
                    <th>Sepal L.</th>
                    <th>Sepal W.</th>
                    <th>Lokasyon</th>
                </tr>
            </thead>
            <tbody>
                {% for plant in plants %}
                <tr>
                    <td>{{ plant.species }}</td>
                    <td>{{ plant.sepal_length }}</td>
                    <td>{{ plant.sepal_width }}</td>
                    <td>
                        {% if plant.location %}{{ plant.location.city }}{% else %}-{% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>Aradığınız kriterlere uygun bitki bulunamadı.</p>
    {% endif %}

{% endblock %}